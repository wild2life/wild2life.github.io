import{_ as a,h as s,o as e,aa as n}from"./chunks/framework.CMyQ9WBu.js";const g=JSON.parse('{"title":"VitePress 博客搜索与评论配置指南","description":"","frontmatter":{},"headers":[],"relativePath":"daily-notes/issue-24.md","filePath":"daily-notes/issue-24.md","lastUpdated":null}'),t={name:"daily-notes/issue-24.md"},i=n(`<h1 id="vitepress-博客搜索与评论配置指南" tabindex="-1">VitePress 博客搜索与评论配置指南 <a class="header-anchor" href="#vitepress-博客搜索与评论配置指南" aria-label="Permalink to &quot;VitePress 博客搜索与评论配置指南&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">原文地址</p><p><a href="https://github.com/wild2life/daily-notes/issues/24" target="_blank" rel="noreferrer">VitePress 博客搜索与评论配置指南 | GitHub</a></p></div><p>本文档总结了如何在 VitePress 中集成 <strong>Algolia DocSearch</strong>（全站搜索）和 <strong>Giscus</strong>（评论系统），并提供部署与配置注意事项。</p><hr><h2 id="_1️⃣-前提条件" tabindex="-1">1️⃣ 前提条件 <a class="header-anchor" href="#_1️⃣-前提条件" aria-label="Permalink to &quot;1️⃣ 前提条件&quot;">​</a></h2><ul><li>使用 VitePress 构建博客或文档网站</li><li>已注册 <strong>Algolia DocSearch</strong> 并获得 <code>apiKey</code>、<code>indexName</code> 和 <code>appId</code></li><li>已创建 GitHub 仓库，并启用 Issues 用于 Giscus 评论</li><li>部署到 GitHub Pages 或自定义域名</li></ul><hr><h2 id="_2️⃣-配置-algolia-docsearch" tabindex="-1">2️⃣ 配置 Algolia DocSearch <a class="header-anchor" href="#_2️⃣-配置-algolia-docsearch" aria-label="Permalink to &quot;2️⃣ 配置 Algolia DocSearch&quot;">​</a></h2><h3 id="_2-1-安装依赖-可选" tabindex="-1">2.1 安装依赖（可选） <a class="header-anchor" href="#_2-1-安装依赖-可选" aria-label="Permalink to &quot;2.1 安装依赖（可选）&quot;">​</a></h3><p>VitePress 默认主题支持 Algolia DocSearch，如果需要自定义 JS 可安装：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @docsearch/js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-2-配置-vitepress-config-js-或-vitepress-config-ts" tabindex="-1">2.2 配置 vitepress/config.js 或 vitepress/config.ts <a class="header-anchor" href="#_2-2-配置-vitepress-config-js-或-vitepress-config-ts" aria-label="Permalink to &quot;2.2 配置 vitepress/config.js 或 vitepress/config.ts&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>export default {</span></span>
<span class="line"><span>  base: &#39;/blog/&#39;, // 如果部署在子路径下</span></span>
<span class="line"><span>  themeConfig: {</span></span>
<span class="line"><span>    algolia: {</span></span>
<span class="line"><span>      apiKey: &#39;你的APIKey&#39;,        // Algolia 公共 API Key</span></span>
<span class="line"><span>      indexName: &#39;你的IndexName&#39;,  // Algolia 索引名称</span></span>
<span class="line"><span>      appId: &#39;你的AppId&#39;,          // DocSearch V3 必须提供</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_2-3-部署注意事项" tabindex="-1">2.3 部署注意事项 <a class="header-anchor" href="#_2-3-部署注意事项" aria-label="Permalink to &quot;2.3 部署注意事项&quot;">​</a></h3><ul><li>确保 Algolia 索引已填充内容</li><li>自定义域名或子路径下，需设置 base</li><li>部署后测试搜索功能是否正常</li></ul><h2 id="_3️⃣-配置-giscus-评论" tabindex="-1">3️⃣ 配置 Giscus 评论 <a class="header-anchor" href="#_3️⃣-配置-giscus-评论" aria-label="Permalink to &quot;3️⃣ 配置 Giscus 评论&quot;">​</a></h2><h3 id="_3-1-添加组件" tabindex="-1">3.1 添加组件 <a class="header-anchor" href="#_3-1-添加组件" aria-label="Permalink to &quot;3.1 添加组件&quot;">​</a></h3><p>在文章页底部添加 Giscus Widget</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>&lt;giscus-widget</span></span>
<span class="line"><span>  repo=&quot;用户名/仓库名&quot;</span></span>
<span class="line"><span>  repo-id=&quot;仓库ID&quot;</span></span>
<span class="line"><span>  category=&quot;Category Name&quot;</span></span>
<span class="line"><span>  category-id=&quot;Category ID&quot;</span></span>
<span class="line"><span>  mapping=&quot;pathname&quot;</span></span>
<span class="line"><span>  reactions-enabled=&quot;1&quot;</span></span>
<span class="line"><span>  emit-metadata=&quot;0&quot;</span></span>
<span class="line"><span>  input-position=&quot;bottom&quot;</span></span>
<span class="line"><span>  theme=&quot;light&quot;</span></span>
<span class="line"><span>  lang=&quot;zh-CN&quot;</span></span>
<span class="line"><span>/&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_3-2-参数说明" tabindex="-1">3.2 参数说明 <a class="header-anchor" href="#_3-2-参数说明" aria-label="Permalink to &quot;3.2 参数说明&quot;">​</a></h3><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>repo</td><td>GitHub 仓库，例如 <code>wild2life/daily-notes</code></td></tr><tr><td>repo-id</td><td>GitHub 仓库唯一 ID</td></tr><tr><td>category</td><td>Issue 分类名称</td></tr><tr><td>category-id</td><td>Issue 分类 ID</td></tr><tr><td>mapping</td><td>页面与 Issue 匹配方式，如 <code>pathname</code></td></tr><tr><td>reactions-enabled</td><td>是否允许点赞（1/0）</td></tr><tr><td>input-position</td><td>评论框位置（top/bottom）</td></tr><tr><td>theme</td><td>主题颜色（light/dark/preferred_color_scheme）</td></tr><tr><td>lang</td><td>语言，例如 <code>zh-CN</code></td></tr></tbody></table><h3 id="_3-3-部署注意事项" tabindex="-1">3.3 部署注意事项 <a class="header-anchor" href="#_3-3-部署注意事项" aria-label="Permalink to &quot;3.3 部署注意事项&quot;">​</a></h3><ul><li>仓库必须公开，访客才能加载评论</li><li>自定义域名下需保证页面能访问 GitHub API</li><li>映射方式与路径设置一致，确保每篇文章都有独立评论区</li></ul><h2 id="_4️⃣-配置顺序与最佳实践" tabindex="-1">4️⃣ 配置顺序与最佳实践 <a class="header-anchor" href="#_4️⃣-配置顺序与最佳实践" aria-label="Permalink to &quot;4️⃣ 配置顺序与最佳实践&quot;">​</a></h2><ul><li>配置 base 与自定义域名，保证网站 URL 正确</li><li>添加 Algolia DocSearch，测试搜索功能</li><li>添加 Giscus 评论，测试评论加载和提交</li><li>部署到 GitHub Pages 或自定义域名后再次测试</li></ul><h2 id="_5️⃣-常见问题" tabindex="-1">5️⃣ 常见问题 <a class="header-anchor" href="#_5️⃣-常见问题" aria-label="Permalink to &quot;5️⃣ 常见问题&quot;">​</a></h2><table><thead><tr><th>问题</th><th>解决方案</th></tr></thead><tbody><tr><td>搜索框不显示</td><td>检查 <code>themeConfig.algolia</code> 配置，确认 VitePress 版本支持 Algolia</td></tr><tr><td>搜索结果为空</td><td>确认 Algolia 索引已填充数据，<code>indexName</code> 是否正确</td></tr><tr><td>评论无法加载</td><td>仓库必须公开，确认 <code>repo</code>、<code>repo-id</code>、<code>category-id</code> 设置正确</td></tr><tr><td>部署后 404</td><td>检查 <code>base</code> 配置与实际子路径是否一致，确认页面已有 <code>index.html</code></td></tr></tbody></table><hr><h2 id="_6️⃣-参考资料" tabindex="-1">6️⃣ 参考资料 <a class="header-anchor" href="#_6️⃣-参考资料" aria-label="Permalink to &quot;6️⃣ 参考资料&quot;">​</a></h2><ul><li><a href="https://vitepress.vuejs.org/" target="_blank" rel="noreferrer">VitePress 官方文档</a></li><li><a href="https://docsearch.algolia.com/" target="_blank" rel="noreferrer">Algolia DocSearch</a></li><li><a href="https://giscus.app/" target="_blank" rel="noreferrer">Giscus 官方文档</a></li></ul>`,30),l=[i];function r(p,o,d,c,h,u){return e(),s("div",null,l)}const m=a(t,[["render",r]]);export{g as __pageData,m as default};
