import{_ as t,h as a,o as e,aa as i}from"./chunks/framework.CMyQ9WBu.js";const k=JSON.parse('{"title":"飞书二维码加载失败问题排查与解决说明文档","description":"","frontmatter":{},"headers":[],"relativePath":"daily-notes/issue-19.md","filePath":"daily-notes/issue-19.md","lastUpdated":null}'),l={name:"daily-notes/issue-19.md"},d=i('<div class="tip custom-block"><p class="custom-block-title">原文地址</p><p><a href="https://github.com/wild2life/daily-notes/issues/19" target="_blank" rel="noreferrer">飞书二维码加载失败问题排查与解决说明文档 | GitHub</a></p></div><h1 id="飞书二维码加载失败问题排查与解决说明文档" tabindex="-1">飞书二维码加载失败问题排查与解决说明文档 <a class="header-anchor" href="#飞书二维码加载失败问题排查与解决说明文档" aria-label="Permalink to &quot;飞书二维码加载失败问题排查与解决说明文档&quot;">​</a></h1><h2 id="🧩-常见问题场景汇总" tabindex="-1">🧩 常见问题场景汇总 <a class="header-anchor" href="#🧩-常见问题场景汇总" aria-label="Permalink to &quot;🧩 常见问题场景汇总&quot;">​</a></h2><p>在本地开发或内网环境中，飞书二维码 SDK 加载失败的常见场景如下：</p><h3 id="场景-1-开启浏览器代理插件-关闭后仍需清缓存才能加载成功" tabindex="-1">场景 1：开启浏览器代理插件，关闭后仍需清缓存才能加载成功 <a class="header-anchor" href="#场景-1-开启浏览器代理插件-关闭后仍需清缓存才能加载成功" aria-label="Permalink to &quot;场景 1：开启浏览器代理插件，关闭后仍需清缓存才能加载成功&quot;">​</a></h3><h4 id="📌-问题表现" tabindex="-1">📌 问题表现： <a class="header-anchor" href="#📌-问题表现" aria-label="Permalink to &quot;📌 问题表现：&quot;">​</a></h4><ul><li>开启浏览器代理插件（如 SwitchyOmega）时二维码加载失败；</li><li>关闭插件后仍然无法加载；</li><li>清除浏览器缓存后恢复正常。</li></ul><h4 id="🧠-原因分析" tabindex="-1">🧠 原因分析： <a class="header-anchor" href="#🧠-原因分析" aria-label="Permalink to &quot;🧠 原因分析：&quot;">​</a></h4><ol><li>代理插件可能劫持请求头、DNS、返回内容等；</li><li>飞书 CDN 请求可能被中间代理修改或失败；</li><li>浏览器缓存了失败响应或错误的脚本内容；</li><li>关闭插件后，浏览器仍使用缓存 → 加载失败；</li><li>清除缓存后重新请求飞书 CDN → 成功加载。</li></ol><hr><h3 id="场景-2-公司-vpn-开启状态下二维码无法加载" tabindex="-1">场景 2：公司 VPN 开启状态下二维码无法加载 <a class="header-anchor" href="#场景-2-公司-vpn-开启状态下二维码无法加载" aria-label="Permalink to &quot;场景 2：公司 VPN 开启状态下二维码无法加载&quot;">​</a></h3><h4 id="📌-问题表现-1" tabindex="-1">📌 问题表现： <a class="header-anchor" href="#📌-问题表现-1" aria-label="Permalink to &quot;📌 问题表现：&quot;">​</a></h4><ul><li>启用公司 VPN 后二维码加载失败；</li><li>关闭 VPN 后有时也无法加载；</li><li>清除缓存或切换网络后恢复正常。</li></ul><h4 id="🧠-原因分析-1" tabindex="-1">🧠 原因分析： <a class="header-anchor" href="#🧠-原因分析-1" aria-label="Permalink to &quot;🧠 原因分析：&quot;">​</a></h4><ol><li>VPN 改变出口网络路径；</li><li>某些 VPN 会限制特定 CDN 域名访问；</li><li>飞书的静态资源请求（如 JS/CSS）可能被中间设备拦截或限速；</li><li>加载失败的资源被缓存，关闭 VPN 后仍旧不可用；</li><li>需要清除缓存后才能重新加载成功。</li></ol><hr><h3 id="场景-3-无-vpn、无代理插件-二维码依然加载失败-清除缓存后恢复" tabindex="-1">场景 3：无 VPN、无代理插件，二维码依然加载失败，清除缓存后恢复 <a class="header-anchor" href="#场景-3-无-vpn、无代理插件-二维码依然加载失败-清除缓存后恢复" aria-label="Permalink to &quot;场景 3：无 VPN、无代理插件，二维码依然加载失败，清除缓存后恢复&quot;">​</a></h3><h4 id="📌-问题表现-2" tabindex="-1">📌 问题表现： <a class="header-anchor" href="#📌-问题表现-2" aria-label="Permalink to &quot;📌 问题表现：&quot;">​</a></h4><ul><li>网络正常、无代理、无 VPN；</li><li>飞书二维码无法加载或扫码无响应；</li><li>清理缓存后恢复。</li></ul><h4 id="🧠-原因分析-2" tabindex="-1">🧠 原因分析： <a class="header-anchor" href="#🧠-原因分析-2" aria-label="Permalink to &quot;🧠 原因分析：&quot;">​</a></h4><ol><li>可能曾发生过一次加载失败（网络波动、DNS 问题）；</li><li>浏览器缓存了失败响应或失效脚本；</li><li>失败的缓存内容被重复使用；</li><li>清缓存后才重新从飞书 CDN 请求资源 → 成功。</li></ol><hr><h2 id="💡-为什么清除缓存会解决问题" tabindex="-1">💡 为什么清除缓存会解决问题？ <a class="header-anchor" href="#💡-为什么清除缓存会解决问题" aria-label="Permalink to &quot;💡 为什么清除缓存会解决问题？&quot;">​</a></h2><table><thead><tr><th>项目</th><th>说明</th></tr></thead><tbody><tr><td>浏览器缓存机制</td><td>浏览器默认缓存静态资源（包括失败响应）</td></tr><tr><td>CDN 错误缓存</td><td>有时失败的请求也会被缓存（如 403/404）</td></tr><tr><td>脚本状态污染</td><td>加载失败的 JS 脚本也可能缓存，后续访问用的仍是旧版本</td></tr><tr><td>清缓存作用</td><td>强制浏览器重新向服务器拉取资源，获取正确版本</td></tr></tbody></table><hr><h2 id="🛠-推荐的操作方法" tabindex="-1">🛠 推荐的操作方法 <a class="header-anchor" href="#🛠-推荐的操作方法" aria-label="Permalink to &quot;🛠 推荐的操作方法&quot;">​</a></h2><table><thead><tr><th>操作方式</th><th>说明</th></tr></thead><tbody><tr><td>✅ 使用无痕窗口访问</td><td>避免任何缓存影响</td></tr><tr><td>✅ Ctrl + F5 强刷页面</td><td>忽略缓存重新请求资源</td></tr><tr><td>✅ 清除缓存（开发者工具 -&gt; 应用 -&gt; 清除缓存）</td><td>彻底清空脚本与缓存资源</td></tr><tr><td>✅ 更换浏览器测试</td><td>验证是否是缓存问题</td></tr><tr><td>✅ 检查代理/VPN 状态</td><td>关闭后再清缓存尝试加载二维码</td></tr></tbody></table><hr><h2 id="🚫-为什么-ip-地址-如-192-168-x-x-更容易触发二维码加载失败" tabindex="-1">🚫 为什么 IP 地址（如 192.168.x.x）更容易触发二维码加载失败？ <a class="header-anchor" href="#🚫-为什么-ip-地址-如-192-168-x-x-更容易触发二维码加载失败" aria-label="Permalink to &quot;🚫 为什么 IP 地址（如 192.168.x.x）更容易触发二维码加载失败？&quot;">​</a></h2><p>Chrome 和现代浏览器对安全上下文的要求导致：</p><table><thead><tr><th>访问方式</th><th>是否安全上下文</th><th>第三方 Cookie 是否允许</th><th>飞书二维码是否稳定</th></tr></thead><tbody><tr><td><code>http://localhost</code></td><td>✅ 是</td><td>✅ 支持</td><td>✅ 正常</td></tr><tr><td><code>http://127.0.0.1</code></td><td>✅ 是</td><td>✅ 支持</td><td>✅ 正常</td></tr><tr><td><code>http://192.168.x.x</code></td><td>❌ 否</td><td>🚫 不支持（除非 HTTPS）</td><td>❌ 易失败</td></tr></tbody></table><hr><h2 id="📦-飞书二维码脚本引用示例" tabindex="-1">📦 飞书二维码脚本引用示例 <a class="header-anchor" href="#📦-飞书二维码脚本引用示例" aria-label="Permalink to &quot;📦 飞书二维码脚本引用示例&quot;">​</a></h2><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://lf-package-cn.feishucdn.com/obj/feishu-static/lark/passport/qrcode/LarkSSOSDKWebQRCode-1.0.111.js?v=1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>建议加上 <code>?v=1</code> 等 query 参数避免缓存误用。</p><hr><h2 id="✅-总结建议" tabindex="-1">✅ 总结建议 <a class="header-anchor" href="#✅-总结建议" aria-label="Permalink to &quot;✅ 总结建议&quot;">​</a></h2><table><thead><tr><th>问题来源</th><th>推荐解决方式</th></tr></thead><tbody><tr><td>代理插件干扰</td><td>关闭插件 + 清缓存</td></tr><tr><td>VPN 限制 CDN</td><td>关闭 VPN + 清缓存</td></tr><tr><td>缓存旧失败响应</td><td>Ctrl + F5 强刷，或使用无痕模式</td></tr><tr><td>本地 IP 访问</td><td>使用 localhost 代替内网 IP 地址</td></tr></tbody></table><hr><p>如需进一步排查二维码 SDK 的加载失败，可以打开浏览器控制台（Network 和 Console 面板）查看：</p><ul><li><code>qrcode</code> 脚本是否加载成功？</li><li>CDN 请求是否状态码为 200？</li><li>是否有 <code>SameSite</code>、<code>cookie</code>、或 CSP 相关的警告？</li></ul>',41),r=[d];function h(s,o,n,c,p,u){return e(),a("div",null,r)}const m=t(l,[["render",h]]);export{k as __pageData,m as default};
